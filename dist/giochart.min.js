!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("moment"),require("antd/lib/table"),require("G2"),require("lodash")):"function"==typeof define&&define.amd?define(["react","moment","antd/lib/table","G2","lodash"],e):"object"==typeof exports?exports.GIO=e(require("react"),require("moment"),require("antd/lib/table"),require("G2"),require("lodash")):t.GIO=e(t.React,t.moment,t["antd/lib/table"],t.G2,t.lodash)}(this,function(t,e,r,n,o){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){"use strict";e.__esModule=!0;var n=r(2),o=r(!function(){var t=new Error('Cannot find module "./Chart"');throw t.code="MODULE_NOT_FOUND",t}());e.Chart=o.default;var a=r(4);e.ContextListener=a.default;var s=r(9);e.DataSource=s.default;var i=r(5);e.GrTable=i.default;var u=function(t){return n.createElement(s.default,{params:t.params,style:t.style},n.createElement(a.default,{chartType:t.chartType,granularities:t.params.granularities,adjust:t.adjust}))},c=function(t){var e=t.metrics,r=t.dimensions||[];t.chartType.includes("dimension")&&r.unshift("tm"),0===r.length&&r.unshift("bar"===t.chartType?"v":"tm");var n;return r.includes("tm")&&(n=[{id:"tm",interval:t.interval}]),{dimensions:r,filter:t.filter,granularities:n,limit:t.top,metrics:e,orders:t.orders,timeRange:t.timeRange,userTag:t.userTag}};e.convertChartParams=c,e.default=u},function(e,r){e.exports=t},,function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o=r(2),a=r(!function(){var t=new Error('Cannot find module "./Chart"');throw t.code="MODULE_NOT_FOUND",t}()),s=r(5),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.render=function(){var t=this.generateChartParams();return"table"===t.chartType?o.createElement(s.default,{chartParams:t,source:this.context.source,select:this.props.select}):o.createElement(a.default,{chartParams:t,source:this.context.source,select:this.props.select})},e.prototype.generateChartParams=function(){return this.props.hasOwnProperty("chartParams")?this.props.chartParams:{adjust:this.props.adjust,chartType:this.props.chartType,columns:this.context.columns,granularities:this.props.granularities}},e}(o.Component);i.contextTypes={columns:o.PropTypes.array,selectHandler:o.PropTypes.func,selected:o.PropTypes.any,source:o.PropTypes.any},e.default=i},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o=r(2),a=r(6),s=r(7),i=r(8),u=function(t){return function(e,r){return e[t]>r[t]?1:-1}},c=function(t,e){return function(r){return r>e?"rgba(255,211,99, "+(r-e)/(t[1]-e)+")":r<e?"rgba(95,182,199, "+(r-e)/(t[0]-e)+")":void 0}},p=function(t,e){return function(t){return{children:t,props:{style:{backgroundColor:e(t)}}}}},l=function(t){return"tm"===t.id?d.formatDate:void 0},d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.formatDate=function(t){return a.unix(t/1e3).format("YYYY-MM-DD")},e.getRowKey=function(t,e){return""+e},e.prototype.render=function(){var t=this.props,r=t.chartParams,n=t.source;if(!n||!r)return null;var a=new i.Frame(n),d=r.columns.map(function(t){return{dataIndex:t.id,key:t.id,render:t.isDim?l(t):p(t,c(i.Frame.range(a,t.id),i.Frame.median(a,t.id))),sorter:u(t.id),title:t.name}});return this.props.hasOwnProperty("extraColumns")&&(d=d.concat(this.props.extraColumns)),o.createElement(s.default,{dataSource:n,columns:d,pagination:n.length>20&&void 0,rowKey:e.getRowKey})},e}(o.Component);e.default=d},function(t,r){t.exports=e},function(t,e){t.exports=r},function(t,e){t.exports=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o=r(10),a=r(2);e.HttpStatus={Ok:200,Created:201,NoContent:204,MovedPermanently:301,SeeOther:303,NotModified:304,BadRequest:400,Unauthorized:401,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,RequestTimeout:408,UnsupportedEntity:422,Locked:423,TooManyRequests:429,InternalServerError:500,NotImplemented:501};var s=function(t){function r(e){var r=t.call(this,e)||this;return r.state={columns:null,isLoaded:!1,selected:null,source:null},r}return n(r,t),r.prototype.render=function(){return a.Children.only(this.props.children)},r.prototype.getChildContext=function(){return{columns:this.state.columns,selected:this.state.selected,source:this.state.source}},r.prototype.componentWillReceiveProps=function(t){this.props.params!==t.params&&this.defaultRequest(t.params,this.afterFetch.bind(this))},r.prototype.defaultRequest=function(t,r){var n;n=this.props.hasOwnProperty("sourceUrl")?fetch(this.props.sourceUrl):fetch("/v4/projects/"+project.id+"/chartdata",{credentials:"same-origin",contentType:"application/json",method:"post",body:JSON.stringify(t)}),n.then(function(t){var r=t.status;if(r===e.HttpStatus.Ok)return t.json()}).then(function(t){return r(t)})},r.prototype.componentDidMount=function(){var t=this.props.params;this.defaultRequest(t,this.afterFetch.bind(this))},r.prototype.afterFetch=function(t){var e=t.meta.columns,r=o.map(t.meta.columns,"id"),n=o.map(t.data,function(t){return o.zipObject(r,t)});this.setState({isLoaded:!0,columns:e,source:n}),this.props.onLoad&&this.props.onLoad(this.state)},r}(a.Component);s.childContextTypes={columns:a.PropTypes.array,selectHandler:a.PropTypes.func,selected:a.PropTypes.any,source:a.PropTypes.any},e.default=s},function(t,e){t.exports=o}])});